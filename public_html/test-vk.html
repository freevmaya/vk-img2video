<!DOCTYPE html>
<!-- Файл: test-vk.html -->
<html>
<head>
    <title>Test VK Bridge</title>
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>VK Bridge Test</h1>
    <div id="status" class="info">Testing VK Bridge...</div>
    <div id="userInfo"></div>
    
    <script>
        const status = document.getElementById('status');
        const userInfo = document.getElementById('userInfo');
        
        async function runTest() {
            // Тест 1: Проверка загрузки VK Bridge
            if (typeof vkBridge === 'undefined') {
                status.innerHTML = '<span class="error">❌ VK Bridge NOT loaded</span>';
                return;
            }
            
            status.innerHTML = '<span class="success">✅ VK Bridge loaded</span>';
            
            try {
                // Тест 2: Инициализация
                const initResult = await vkBridge.send('VKWebAppInit', {});
                status.innerHTML += '<br><span class="success">✅ VKWebAppInit success</span>';
                
                // Тест 3: Получение данных пользователя
                const user = await vkBridge.send('VKWebAppGetUserInfo', {});
                userInfo.innerHTML = `
                    <h2>User Information:</h2>
                    <p><strong>Name:</strong> ${user.first_name} ${user.last_name}</p>
                    <p><strong>ID:</strong> ${user.id}</p>
                    ${user.photo_200 ? `<img src="${user.photo_200}" width="100" style="border-radius:50%;">` : ''}
                `;
                status.innerHTML += `<br><span class="success">✅ User: ${user.first_name} ${user.last_name}</span>`;                
            } catch (error) {
                status.innerHTML += `<br><span class="error">❌ Error: ${error.message}</span>`;
            }
        }
        
        // Запускаем тест
        runTest();
    </script>
</body>
</html>